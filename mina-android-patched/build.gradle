// MINA Android Patched Module
// Clean, dependency-free Java library compatible with Android

apply plugin: 'java-library'

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17

    withJavadocJar()
    withSourcesJar()
}

dependencies {
    // No external dependencies.
    // This module contains a minimal patched version of MINA 
    // (NioSocketAcceptor, IoSession, IoHandler) so Android can run it.
}

tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
    options.release = 17   // Ensures consistent Java 17 bytecode
}

tasks.withType(Jar) {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    archiveBaseName.set("mina-android-patched")
    archiveVersion.set("1.0.0")

    // Recommended for reproducible JARs
    preserveFileTimestamps = false
    reproducibleFileOrder = true
}